var listType = new ListDic();
listType.add(new DicClass("News20140403", "proNews"));
listType.add(new DicClass("News20150302", "proNews"));
listType.add(new DicClass("JionUs2014", "compNews"));
listType.add(new DicClass("Decennial", "compNews"));
listType.add(new DicClass("Contracts", "proNews"));
listType.add(new DicClass("Year2014", "teamAct"));
listType.add(new DicClass("Year2013", "teamAct"));
listType.add(new DicClass("Year2012", "teamAct"));
var TagType = ["proNews", "compNews", "teamAct"];
$(function () {
    if ($("#proNewsNum")[0] != null) {
        for (var i = 0; i < TagType.length; i++) {
            $("#" + TagType[i] + "Num")[0].innerHTML = "（" + $("#" + TagType[i] + "Content a").length + "）";
        }
        ChangeTo(type);
    }
    $('.divHomeNorth').scrollFixed({ fixed: 'left' });
    $('.divSubPageSideTop').click(function () {
        $('html, body').animate({ scrollTop: 0 }, 'fast');
    });
    if ($.browser.msie && ($.browser.version == "7.0")) {
        $('.bodyNewsPage .divSubPageCenter .pEnd').css({ top: -45 });
    }
    $('#proNews,#compNews,#teamAct').click(function () {
        var id = $(this).attr("id");
        var myClass = $(this).attr('class');
        ClickTheArrow(myClass, id);
    });
    $('.divMenu,.divMenu a').click(function () {
        menuClick = true;
        var id = $(this).find('a').attr("id");
        if (id == null)
            id = $(this).attr("id");
        var index = id.substring(6, 7);
        document.location.href = '../Default.aspx?index=' + index;
    });
    $('.divFollowBtn').hover(function () {
        $('.usercard_layer').css("left", "825px");
    });
    $('.divFollowBtn').focus(function () {
        $('.usercard_layer').css("left", "825px");
    });
    $('.divSubPageSerch').click(function () {
        var tags = $('.divTagsContents');
        var searthValue = $('.iptSubPageSerch')[0].value;
        for (var i = 0; i < tags.length; i++) {
            var as = $(tags[i]).find("a");
            for (var j = 0; j < as.length; j++) {
                if (searthValue != "") {
                    if (as[j].innerHTML.toUpperCase().indexOf(searthValue.toUpperCase()) != -1) {
                        $(as[j]).css({ "color": "Green", "font-weight": "800", "font-size": "1.15em" });
                        var theID = $(tags[i]).attr("id");
                        ClickTheArrow("divDown", theID.substring(0, theID.length - 7));
                        break;
                    }
                }
                var color = $(as[j]).css("color").toUpperCase().replace(/\s+/g, "");
                if (color != "RED" && color != "#FF0000" && color != "RGB(255,0,0)")
                    $(as[j]).css("color", "Gray");
            }
        }
    });
    $('.divTagsContents a').click(function () {
        var myClass = $(this).attr("class");
        ChangeTo(myClass.substring(1, myClass.length));
    });
});
function ClickTheArrow(arrowType, divID) {
    var divContent = $('.divTagsContents');
    for (var i = 0; i < divContent.length; i++) {
        if (arrowType == "divDown") {
            if ($(divContent[i]).attr("id") == divID + "Content") {
                $("div#" + divID + "Content").css({ display: "block" });
                $("#" + divID).attr("class", "divUp");
            }
            else {
                $("div#" + $(divContent[i]).attr("id")).css({ display: "none" });
                var theID = $(divContent[i]).attr("id");
                $("#" + theID.substring(0, theID.length - 7)).attr("class", "divDown");
            }
        }
        else {
            if ($(divContent[i]).attr("id") == divID + "Content") {
                $("#" + divID).attr("class", "divDown");
                $("div#" + divID + "Content").css({ display: "none" });
            }
        }
    }

}
function GoBack(index) {
    document.location.href = '../Default.aspx?index=' + index;
}
function ChangeTo(pageType){
    $(".divSubPageCenter")[0].innerHTML = $("." + pageType)[0].innerHTML;
    ChangeSubPageRight(pageType);
}
function GetTheLeftPage(thePage) { return (m_ContractInfo.length - (thePage - 1) * m_InfoCount) > m_InfoCount ? thePage*m_InfoCount : m_ContractInfo.length; }
function ShowThisPage(obj) {
    $('.divPagesAct').attr("class", "divPages");
    var thePage = parseInt($(obj).text());
    $('#divConBack').html("");
    for (var i = (thePage - 1) * m_InfoCount; i < GetTheLeftPage(thePage); i++) {
        $('#divConBack').append("<div class=\"divContractLine\" " + (i == 0 ? "id=\"redContractLine\"" : "") + "><p class=\"pTime\">" + m_ContractInfo[i].time + "</p><div>" + m_ContractInfo[i].contents + "</div></div>");
    }
    $(obj).attr("class", "divPagesAct");
    $('#divConBack').height(m_InfoCount * $('.divContractLine').height());
}
function ChangeSubPageRight(pageType) {
    var classType = listType.getValue(pageType);
    $('div#'+classType+'Content').css("display","block");
    for (var i = 0; i < TagType.length; i++) {
        if (TagType[i] == classType)
            $("#" + TagType[i]).addClass("divUp");
        else {
            $("#" + TagType[i]).addClass("divDown");
        }
        $('#' + TagType[i] + 'Content a').removeClass("aNowPage");
    }
    $(".a" + pageType).addClass("aNowPage");
    if (pageType == "Contracts") {
        for (var i = Math.ceil(m_ContractInfo.length /m_InfoCount); i>0 ; i--) {
            $('#divNewPages').append("<div class=\"divPages\" onclick=\"ShowThisPage(this)\">" + i + "</div>");
        }
        ShowThisPage($('.divPages')[$('.divPages').length - 1]);
    }
}
var m_InfoCount = 10;
var m_ContractInfo = [
    { time: "2017年07月19日，", contents: "公司中标长三角环境气象预报预警中心“污染天气大数据平台建设”项目。"},
	{ time: "2017年06月22日，", contents: "公司中标上海市嘉定区气象局“白银社区智能气象服务平台”项目。"},
    { time: "2017年06月20日，", contents: "公司中标中国气象局气象干部培训学院辽宁分院“辽宁分院环境气象教学平台系统”项目。"},
    { time: "2017年04月12日，", contents: "公司中标上海市防汛信息中心（上海市水务信息中心、上海市海洋信息中心）“上海市洪水风险图应用管理”项目。"},
    { time: "2017年03月21日，", contents: "公司中标上海市环境保护信息中心“上海市环保一张图平台”项目。"},
    { time: "2016年12月28日，", contents: "公司中标上海市气象科技服务中心“保险行业气象灾害风险管理与服务系统(一期-华东区域)“项目。" },
    { time: "2016年12月22日，", contents: "公司中标国家海洋局东海预报中心“远洋航线保障预报综合信息服务系统”项目。" },
    { time: "2016年12月08日，", contents: "公司中标西安市气象局“西安城市暴雨内涝淹没模型及内涝风险预报预警系统”建设项目。" },
    { time: "2016年12月05日，", contents: "公司中标“国家海洋局东海信息中心信息系统更新及东海海洋环境在线监测产品初步集成”研发项目。" },
    { time: "2016年11月17日，", contents: "公司中标“上海市环境监测中心-长三角区域空气质量预测预报系统”采购项目。" },
    { time: "2016年11月03日，", contents: "公司中标国家海洋局东海信息中心“东海区海岛监视监测系统升级”采购项目。" },
    { time: "2016年11月02日，", contents: "公司中标上海市防雷中心“影响预报和风险预警产品制作系统(二期)”项目。" },
    { time: "2016年10月20日，", contents: "公司中标四川省环境保护科学研究院“计算机服务器及集成平台开发项目”。" },
    { time: "2016年08月31日，", contents: "公司中标国家海洋局东海预报中心“海洋观测预报信息处理、管理、可视化等部分应用系统开发项目”。" },
    { time: "2016年08月17日，", contents: "公司中标上海市防雷中心“极端性暴雨内涝影响预报预警制作系统”。" },
    { time: "2016年08月02日，", contents: "公司中标上海市浦东新区气象局“健康气象影响预报和风险预警平台项目”。" },
    { time: "2016年07月01日，", contents: "公司承担国家重点研发计划“大气污染成因与控制技术研究”专项“大气环境监测数据共享技术及应用”项目“大气环境监测数据管理制度与共享机制研究”子课题。" },
    { time: "2016年06月03日，", contents: "公司中标上海市防汛信息中心（上海市水务信息中心、上海市海洋信息中心）“洪水风险图应用管理”和“海洋生态环境监督管理系统”。" },
    { time: "2016年04月28日，", contents: "公司中标上海市环境科学研究院“实施清洁空气行动的改善效果跟踪评估系统”和“大气复合污染过程成因分析系统”。" },
    { time: "2016年04月07日，", contents: "公司中标“福建省气象科学研究所福建省环境气象业务平台项目”。" },
    { time: "2016年03月18日，", contents: "公司中标“国家海洋局东海信息中心海洋经济信息发布系统建设项目”。" },
    { time: "2015年12月31日，", contents: "公司中标“上海市浦东新区气象局一体化监测警戒系统”项目。" },
    { time: "2015年12月14日，", contents: "公司中标“上海市浦东新区气象局数据服务系统开发”项目。" },
    { time: "2015年12月01日，", contents: "公司中标“国家海洋局东海预报中心海上维权巡航安全保障综合服务平台开发”项目。" },
    { time: "2015年11月25日，", contents: "公司中标“国家海洋局东海信息中心东海区海洋生态专题数据（海表温度、叶绿素a）服务系统开发”项目。" },
    { time: "2015年11月06日，", contents: "公司中标上海市环境保护信息中心“环境空气质量日报预报业务和信息发布系统运维项目”。" },
    { time: "2015年11月02日，", contents: "公司中标上海市环境监测中心“上海市大气颗粒物来源解析与空气重污染预警信息发布系统”项目。" },
    { time: "2015年10月27日，", contents: "公司中标国家海洋局东海信息中心“东海区海岛管理信息系统”项目。" },
    { time: "2015年10月14日，", contents: "公司中标上海市防雷中心“风险预警终端APP开发”项目”。" },
    { time: "2015年9月24日，", contents: "公司中标上海市浦东新区气象局“环境气象数据监测、管理模块开发项目”。" },
    { time: "2015年08月19日，", contents: "公司中标上海市气象局“上海多灾种早期预警系统建设项目”。" },
    { time: "2015年08月03日，", contents: "公司中标国家海洋局东海信息中心“东海分局综合管理信息系统南通示范区数据展示开发服务”项目。" },
    { time: "2015年07月07日，", contents: "公司中标上海市环境科学研究院国家科技支撑计划课题“长三角区域大气复合污染动态来源解析”之大气复合污染动态源解析集成平台开发项目。" },
    { time: "2015年07月01日，", contents: "公司获批承担上海市科委“北斗渔船大数据挖掘与信息增值服务平台开发及示范应用”项目。" },
    { time: "2015年06月10日，", contents: "公司中标宁波市环境监测中心“宁波市空气质量预报预警平台项目”。" },
    { time: "2015年05月19日，", contents: "公司中标上海市防雷中心“城市重大气象灾害影响预报和风险预警系统（一期）项目”。" },
    { time: "2015年03月03日，", contents: "公司中标无锡环境监测中心“环境空气质量预测预报系统”项目。" },
    { time: "2015年01月15日，", contents: "公司中标上海海洋气象台“上海海洋气象监测预报预警服务系统建设项目”。" },
    { time: "2014年12月01日，", contents: "公司中标“上海市环境监测中心环境空气质量AQI预报业务系统建设”项目。" },
    { time: "2014年10月15日，", contents: "公司中标“上海市城市环境气象中心长三角环境气象预报预警中心环境气象预报分析平台建设项目”。" },
    { time: "2014年05月15日，", contents: "公司中标“国家海洋局南通海洋环境监测中心站南通海洋预报减灾示范区建设项目”。" },
    { time: "2014年03月06日，", contents: "公司中标“上海市环境保护局空气质量实时发布系统完善与预报发布公众服务系统”。" },
    { time: "2013年06月05日，", contents: "公司中标“国家海洋局东海分局“中国海监52”船载观测预报系统采购项目”。" },
    { time: "2013年02月28日，", contents: "公司中标“国家海洋局东海预报中心东海区海洋观测预警信息服务平台采购项目”。"}];