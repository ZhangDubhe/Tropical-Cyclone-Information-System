
var listMenuText = new ListDic();
listMenuText.add(new DicClass("Home", "首页"));
listMenuText.add(new DicClass("Solutions", "解决方案"));
listMenuText.add(new DicClass("Products", "产品技术"));
listMenuText.add(new DicClass("Service", "服务"));
listMenuText.add(new DicClass("News", "新闻"));
listMenuText.add(new DicClass("About", "关于我们"));
$(function () {
    $('.divHomeNorth').scrollFixed({ fixed: 'left' });
    var oldId; //主菜单上ICON的平常状态的ID
    var oldText; //主菜单上ICON的平常状态的TEXT
    var needChangeBack = false, menuClick = false;
    //主菜单的ICON鼠标经过事件
    $('.divMenu').hover(function () {
        needChangeBack = false; menuClick = false;
        oldText = $(this).find('p').attr("innerText");
        oldId = $(this).find('a').attr("id");
        if (oldId.indexOf("Hover") == -1) {
            ChangeStatus(oldId.substring(oldId.length - 1, oldId.length), false);
            needChangeBack = true;
        }
    }, function () {
        if (needChangeBack && !menuClick) {
            $(this).find('p').css("color", "#89969C");
            $(this).find('p').text(oldText);
            $(this).find('a').attr("id", oldId);
        }
        else if (menuClick) {
            if (oldId.indexOf("Hover") == -1)
                ChangeStatus(oldId.substring(oldId.length - 1, oldId.length));
        }
    });
    $('.divWebPage .divMenu,.divWebPage .divMenu a').click(function () {
        menuClick = true;

        var id = $(this).find('a').attr("id");
        if (id == null)
            id = $(this).attr("id");

        if (oldId.indexOf("Hover") == -1) {
            var index = id.substring(6, 7);
            console.log(index);
/*            if($(window).width()<=786){

                return
            }*/
            $("html,body").animate({ scrollTop: (index - 1) * 856 }, 300);
        }
    });
    var $headMenu = $("#headMenuForMobile");
    $headMenu.click(function () {
        $(".divHomeNorth").slideDown()
    });
    if($(window).width()<=786){
        scrollHide();
    }

});
function scrollHide(  ) {
    var $window = $(window),
        beforeScrollTop = $window.scrollTop();

    var deviceHeight = $window.height();
    $window.scroll(function() {
        var afterScrollTop = $window.scrollTop(),
            delta = afterScrollTop - beforeScrollTop;
        if( delta < 1.5 * deviceHeight && delta>-0.25*deviceHeight) return false;

        if(delta > 1.5 * deviceHeight ){
            $(".divHomeNorth").slideUp(1000);
        }
        else if(delta < -0.25*deviceHeight){
            $(".divHomeNorth").slideDown(100);
        }
        beforeScrollTop = afterScrollTop;
    });
}

//改变主菜单的状态
function ChangeStatus(index, needChange) {
    for (var i = 1; i < 7; i++) {
        if (i == index) {
            $("div#divMenu0" + i + " p").css("color", "#278FCC");
            $("a#aIcon0" + i).attr("id", "aIcon0" + i + "Hover");
            $("div#divMenu0" + i + " p").text(listMenuText.data[i - 1].myValue);
        }
        else if (needChange == null) {
            $("div#divMenu0" + i + " p").css("color", "#89969C");
            $("a#aIcon0" + i + "Hover").attr("id", "aIcon0" + i);
            $("div#divMenu0" + i + " p").text(listMenuText.data[i - 1].myName);
        }
    }
}
